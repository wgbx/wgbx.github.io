---
title: å¦‚ä½•ä»0æ„å»ºå¼€æºçº§å·¥å…·æ–¹æ³•åº“
date: 2023-11-30
tags:
  - vitePress
---

## 1.ç ”è®¨ç›®çš„

- äº†è§£å¼€æºé¡¹ç›®çš„æ¶æ„
- å­¦ä¹ å¦‚ä½•æ„å»ºå’Œä½¿ç”¨ vitepress
- ç†è§£å¹¶æŒæ¡ Jest å’Œ Playground çš„ä½œç”¨å’Œä½¿ç”¨æ–¹æ³•
- è¿‡ç¨‹ä¸­éšæ—¶æ²Ÿé€šï¼Œéšæ—¶è®¨è®º

## 2.é¡¹ç›®ç»“æ„

å¼€æºé¡¹ç›®çš„æ¶æ„è™½ç„¶å„æœ‰ç‰¹è‰²ï¼Œä½†æ˜¯åŸºæœ¬æ¶æ„éƒ½æ˜¯ç›¸ä¼¼çš„ã€‚ä¸‹å›¾å±•ç¤ºäº†ä¸€ä¸ªå…¸å‹çš„å¼€æºçº§åˆ«çš„Vitepressé¡¹ç›®ç»“æ„ã€‚é€šè¿‡æ·±å…¥å­¦ä¹ è¿™ä¸ªç»“æ„ï¼Œæˆ‘ä»¬å¯ä»¥æ›´å¥½åœ°äº†è§£å¼€æºé¡¹ç›®çš„ç»„ç»‡æ–¹å¼å’Œå·¥ä½œæµç¨‹![image.png](./images/20231130.png)

### md ç›®å½•ç»“æ„

```markdown
tools/
â”œâ”€â”€ .gitignore                     gitå¿½ç•¥æ–‡ä»¶
â”œâ”€â”€ README.md
â”œâ”€â”€ package.json
â”œâ”€â”€ packages/                      é¡¹ç›®çš„æºç åŒ…ç›®å½•
â”‚   â”œâ”€â”€ .vitepress/                viteperssç¼–è¯‘æ–‡ä»¶
â”‚   â”‚   â”œâ”€â”€ config.js
â”‚   â”‚   â”œâ”€â”€ theme/
â”‚   â”‚   â”‚   â”œâ”€â”€ Layout.vue
â”‚   â”‚   â”‚   â””â”€â”€ ...
â”‚   â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”‚   â”œâ”€â”€ Button.vue
â”‚   â”‚   â”‚   â””â”€â”€ ...
â”‚   â”‚   â””â”€â”€ dist/
â”‚   â”‚       â””â”€â”€ ...
â”‚   â”œâ”€â”€ guide/
â”‚   â”‚   â””â”€â”€ index.md
â”‚   â”œâ”€â”€ config/
â”‚   â”‚   â””â”€â”€ ...
â”‚   â”œâ”€â”€ README.md
â”œâ”€â”€ tests/                         æµ‹è¯•ç”¨ä¾‹
â”‚   â””â”€â”€ example.test.js
â”‚   â”œâ”€â”€ core/                      å¾…ç¼–è¯‘æºç 
â”‚   â”œâ”€â”€ posts/                     æ–‡ç« 
â”‚   â”œâ”€â”€ public/                    ä¸éœ€è¦ç¼–è¯‘çš„èµ„æºæ–‡ä»¶
â””â”€â”€ playground                     ä»£ç æ¼”ç»ƒåœºæ–‡ä»¶
â””â”€â”€ npmignore                      npmå¿½ç•¥æ–‡ä»¶
â””â”€â”€ .prettierrc.json               é…ç½®Prettierçš„æ ¼å¼åŒ–è§„åˆ™
â””â”€â”€ CHANGELOG.md                   è®°å½•é¡¹ç›®æ”¹åŠ¨å†å²
â””â”€â”€ dist                           ç¼–è¯‘ä»£ç 
â””â”€â”€ jest.config.js                 é…ç½®Jestçš„æµ‹è¯•ç¯å¢ƒ
â””â”€â”€ rollup.config.js               é…ç½®Rollupçš„æ‰“åŒ…å·¥å…·
â””â”€â”€ tsconfig.json                  é…ç½®TypeScriptçš„ç¼–è¯‘å™¨è®¾ç½®
```

## 3.æ­å»ºç¯å¢ƒ

### æ·»åŠ  VitePress

VitePress æ˜¯ä¸€ä¸ªåŸºäº Vue.js çš„é™æ€ç½‘ç«™ç”Ÿæˆå™¨ï¼Œå®ƒå¯ä»¥ç”¨æ¥å¿«é€Ÿæ­å»ºæ–‡æ¡£ç«™ç‚¹ã€åšå®¢ç­‰é™æ€ç½‘ç«™ï¼ŒåŸºäº Vue 3 å’Œ Vite æ„å»ºï¼Œå®ƒä½¿ç”¨ Markdown ä½œä¸ºæ–‡æ¡£æ ¼å¼ï¼Œå¹¶æä¾›äº†ä¸€ç³»åˆ—çš„ä¸»é¢˜å’Œæ’ä»¶ï¼Œå¯ä»¥å¿«é€Ÿæ„å»ºç¾è§‚ã€æ˜“äºç»´æŠ¤çš„é™æ€ç½‘ç«™ã€‚ä¸å…¶ä»–é™æ€ç½‘ç«™ç”Ÿæˆå™¨ç›¸æ¯”ï¼ŒVitePress å…·æœ‰æ›´å¿«çš„æ„å»ºé€Ÿåº¦å’Œæ›´å¥½çš„å¼€å‘ä½“éªŒ
VitePress çš„ä¸»è¦ç‰¹ç‚¹

- å¿«é€Ÿæ„å»º
   - VitePress åŸºäº Viteï¼Œä½¿ç”¨åŸç”Ÿ ES æ¨¡å—åŠ è½½å™¨ï¼Œå…·æœ‰å¿«é€Ÿçš„çƒ­é‡è½½å’Œå¼€å‘ä½“éªŒ
- ç®€å•æ˜“ç”¨
   - VitePress çš„æ–‡æ¡£ä½¿ç”¨ Markdown æ ¼å¼ç¼–å†™ï¼Œç®€å•æ˜“è¯»ï¼Œæ˜“äºç»´æŠ¤
- å®šåˆ¶åŒ–
   - VitePress æä¾›äº†ä¸€ç³»åˆ—çš„ä¸»é¢˜å’Œæ’ä»¶ï¼Œå¯ä»¥æ ¹æ®éœ€æ±‚è¿›è¡Œå®šåˆ¶å’Œæ‰©å±•
- SEO å‹å¥½
   - VitePress è‡ªåŠ¨ä¸ºæ¯ä¸ªé¡µé¢ç”Ÿæˆé™æ€ HTML æ–‡ä»¶ï¼Œå¹¶æ”¯æŒ SEO ä¼˜åŒ–
- é«˜åº¦å¯é…ç½®
   - VitePress çš„é…ç½®é¡¹éå¸¸çµæ´»ï¼Œå¯ä»¥é€šè¿‡é…ç½®æ–‡ä»¶è¿›è¡Œè‡ªå®šä¹‰è®¾ç½®

```bash
npm init
pnpm add vitepress -D
pnpm vitepress init
```

åœ¨å½“å‰å¸‚åœºä¸Šï¼Œæœ‰ä¸¤ç§ä¸»è¦çš„é€‰æ‹©

- ä¸€ç§æ˜¯åœ¨å¤§å‹é¡¹ç›®æ¡†æ¶ä¸­å•ç‹¬ç»´æŠ¤ä¸€ä¸ªæ–‡æ¡£ç«™ç‚¹
- å¦ä¸€ç§åˆ™æ˜¯å°†æ–‡æ¡£ç«™ç‚¹é›†æˆåˆ°åŒä¸€ä¸ªé¡¹ç›®ä¸­ã€‚å¯¹äºå·¥å…·ç±»åŒ…è€Œè¨€ï¼Œç”±äºå®ƒä»¬é€šå¸¸æ˜¯ç‹¬ç«‹çš„åŠŸèƒ½æ¨¡å—ï¼Œé›†æˆåœ¨åŒä¸€é¡¹ç›®ä¸­å¯ä»¥æ–¹ä¾¿åœ°ç®¡ç†å’Œç»´æŠ¤

è€Œæˆ‘ä»¬çš„å¼€å‘å›¢é˜Ÿé€‰æ‹©äº†æ–¹æ¡ˆäºŒï¼Œå°†æ–‡æ¡£ç«™ç‚¹é›†æˆåˆ°äº†æˆ‘ä»¬çš„å·¥å…·åŒ…é¡¹ç›®ä¸­ã€‚è¿™æ ·åšçš„å¥½å¤„åœ¨äºï¼Œä¸ä»…èƒ½å¤Ÿæ–¹ä¾¿åœ°ç®¡ç†å’Œæ›´æ–°æ–‡æ¡£ï¼Œè¿˜èƒ½å¤Ÿå‡å°‘é¡¹ç›®çš„å†—ä½™ä»£ç ï¼Œæé«˜å¼€å‘æ•ˆç‡

1. åˆ›å»º vitePress ç»“æ„

```
â”Œ  Welcome to VitePress!
â”‚
â—‡  Where should VitePress initialize the config?
â”‚  ./packages
â”‚
â—‡  Site title:
â”‚  My Awesome Project
â”‚
â—‡  Site description:
â”‚  A VitePress Site
â”‚
â—†  Theme:
â”‚  â— Default Theme (Out of the box, good-looking docs)
â”‚  â—‹ Default Theme + Customization
â”‚  â—‹ Custom Theme
```

åœ¨å‘½ä»¤è¡Œä¸­è¾“å…¥ "pnpm run docs:dev"ï¼Œå³å¯å¯åŠ¨ Vitepress å¹¶è®¿é—®ä¸€ä¸ªç”± Vitepress æ„å»ºçš„é™æ€ç«™ç‚¹ç”Ÿæˆ (SSG) é¡µé¢ã€‚è¿™ä¼šåŠ è½½é»˜è®¤çš„ index.md æ–‡ä»¶ï¼Œå¹¶å°†å…¶è½¬æ¢ä¸ºä¸€ä¸ªå¯æµè§ˆçš„ç½‘é¡µï¼Œæ˜¾ç¤ºåœ¨æµè§ˆå™¨ä¸­
å¯ä»¥åœ¨è¿™ä¸ªé¡µé¢ä¸Šæ·»åŠ æˆ–ä¿®æ”¹å†…å®¹ï¼Œä»¥åˆ›å»ºè‡ªå·±çš„è‡ªå®šä¹‰æ–‡æ¡£ç«™ç‚¹

### æ·»åŠ  tsconfig.json

```json
{
  "compilerOptions": {
    "target": "es5",
    "module": "ES2015",
    "lib": ["ES2020", "DOM"],
    "esModuleInterop": true,
    "declaration": true,
    "forceConsistentCasingInFileNames": true,
    "strict": true,
    "noImplicitAny": false,
    "noImplicitThis": false,
    "skipLibCheck": true
  },
  "include": ["packages/core/"],
  "references": []
}
```

### æ·»åŠ  core æºç 

åœ¨ packages ä¸‹åˆ›å»º core ç›®å½•ï¼Œè¯¥é¡¹ç›®å­˜æ”¾é¡¹ç›®æ–¹æ³•æºç ï¼Œåˆ›å»º index.ts

```typescript
/**
 * è·å– URL ä¸­çš„æŸ¥è¯¢å‚æ•°
 * @param url æŒ‡å®š URL è·¯å¾„ï¼Œé»˜è®¤ä¸ºå½“å‰é¡µé¢çš„ URL åœ°å€
 * @returns è¿”å›åŒ…å« URL ä¸­æŸ¥è¯¢å‚æ•°çš„é”®å€¼å¯¹çš„å¯¹è±¡
 * @example
 * const url = 'https://example.com/?name=John&age=30';
 * const query = getQuery(url);
 * console.log(query);
 * // è¾“å‡ºï¼š{ name: "John", age: "30" }
 */
export function getQuery(url = location.href) {
  let queryObj: { [key: string]: string } = {}
  new URL(url).searchParams.forEach((item, key) => {
    queryObj[key] = item
  })
  return queryObj
}
```

1. ç»´æŠ¤ä¸€ä¸ªå…¬å…±æ–¹æ³•ä¸­é—´ä»¶çš„å¥½å¤„æœ‰
   - ç»Ÿä¸€ç®¡ç†
      - å°†å¸¸ç”¨çš„æ–¹æ³•å°è£…ä¸ºä¸­é—´ä»¶ï¼Œå¯ä»¥è®©ä»£ç ç»“æ„æ›´åŠ æ¸…æ™°ï¼Œæ–¹ä¾¿ç»´æŠ¤å’Œç®¡ç†
   - æé«˜å¤ç”¨æ€§
      - é€šè¿‡å°è£…å¸¸ç”¨çš„æ–¹æ³•ä¸ºä¸­é—´ä»¶ï¼Œå¯ä»¥åœ¨ä¸åŒçš„é¡¹ç›®ä¸­é‡å¤ä½¿ç”¨è¿™äº›æ–¹æ³•ï¼Œé¿å…é‡å¤ç¼–å†™ç›¸åŒçš„ä»£ç 
   - å‡å°‘é”™è¯¯
      - å¯¹äºç»è¿‡ä¸¥æ ¼æµ‹è¯•å’ŒéªŒè¯çš„ä¸­é—´ä»¶ï¼Œå¯ä»¥å‡å°‘ä»£ç é”™è¯¯çš„å‘ç”Ÿï¼Œæé«˜ä»£ç çš„å¯é æ€§å’Œç¨³å®šæ€§
   - æ–¹ä¾¿åä½œ
      - é€šè¿‡ç»´æŠ¤å…¬å…±æ–¹æ³•ä¸­é—´ä»¶ï¼Œå¯ä»¥è®©ä¸åŒçš„å¼€å‘è€…ä¹‹é—´æ›´å®¹æ˜“åä½œï¼Œå‡å°‘æ²Ÿé€šæˆæœ¬ï¼Œæé«˜å¼€å‘æ•ˆ
2. JSDoc æ˜¯ JavaScript ä¸­ä¸€ç§å¸¸è§çš„æ³¨é‡Šè§„èŒƒï¼Œå®ƒçš„å¥½å¤„å¦‚ä¸‹
   - è‡ªåŠ¨ç”Ÿæˆæ–‡æ¡£
      - é€šè¿‡ä½¿ç”¨ JSDoc æ³¨é‡Šï¼Œå¯ä»¥è‡ªåŠ¨ç”Ÿæˆä»£ç çš„æ–‡æ¡£ã€‚è¿™äº›æ–‡æ¡£å¯ä»¥åŒ…å«å‡½æ•°ã€ç±»ã€å˜é‡ç­‰çš„æè¿°ã€å‚æ•°ã€è¿”å›å€¼ç­‰ä¿¡æ¯ï¼Œæ–¹ä¾¿å…¶ä»–å¼€å‘äººå‘˜ç†è§£å’Œä½¿ç”¨ä»£ç 
   - æä¾›ä»£ç æç¤º
      - JSDoc æ³¨é‡Šæä¾›äº†ç±»å‹ä¿¡æ¯å’Œæè¿°ï¼Œå¯ä»¥å¸®åŠ©ç¼–è¾‘å™¨æˆ– IDE æ›´å¥½åœ°ç†è§£ä»£ç ï¼Œå¹¶æä¾›å‡†ç¡®çš„ä»£ç æç¤ºã€è‡ªåŠ¨å®ŒæˆåŠŸèƒ½ï¼Œæé«˜å¼€å‘æ•ˆç‡
   - æ”¯æŒé™æ€åˆ†æå·¥å…·
      - è®¸å¤šé™æ€åˆ†æå·¥å…·ï¼ˆå¦‚ ESLintã€TypeScriptï¼‰å¯ä»¥è§£æ JSDoc æ³¨é‡Šï¼Œå¹¶è¿›è¡Œä»£ç æ£€æŸ¥ã€ç±»å‹æ£€æŸ¥ç­‰æ“ä½œã€‚è¿™æ ·å¯ä»¥åœ¨å¼€å‘è¿‡ç¨‹ä¸­å‘ç°æ½œåœ¨çš„é”™è¯¯ã€æä¾›æ›´å¥½çš„ä»£ç è´¨é‡ä¿è¯
   - æå‡å›¢é˜Ÿåä½œ
      - é€šè¿‡ä½¿ç”¨ç»Ÿä¸€çš„ JSDoc æ³¨é‡Šè§„èŒƒï¼Œå›¢é˜Ÿæˆå‘˜å¯ä»¥æ›´å¥½åœ°ç†è§£å½¼æ­¤çš„ä»£ç ï¼Œå¹¶å¿«é€Ÿäº†è§£ä»£ç çš„ç”¨é€”ã€å‚æ•°ã€è¿”å›å€¼ç­‰ä¿¡æ¯ã€‚è¿™æœ‰åŠ©äºæå‡å›¢é˜Ÿåä½œæ•ˆç‡å’Œä»£ç å¯è¯»æ€§
   - æ–‡æ¡£åŒ–ä»£ç ç»“æ„
      - JSDoc æ³¨é‡Šå¯ä»¥å¯¹ä»£ç çš„ç»“æ„è¿›è¡Œæè¿°ï¼Œå¦‚ç±»çš„ç»§æ‰¿å…³ç³»ã€æ¨¡å—çš„å¯¼å‡ºç­‰ã€‚è¿™æ ·å¯ä»¥æ›´æ¸…æ™°åœ°äº†è§£ä»£ç çš„ç»„ç»‡ç»“æ„ï¼Œæ–¹ä¾¿åç»­ç»´æŠ¤å’Œæ‰©å±•

### æ·»åŠ  jest

Jest æ˜¯ä¸€ä¸ªæµè¡Œçš„ JavaScript æµ‹è¯•æ¡†æ¶ï¼Œä¸»è¦ç”¨äºç¼–å†™å•å…ƒæµ‹è¯•ã€é›†æˆæµ‹è¯•å’ŒåŠŸèƒ½æµ‹è¯•ã€‚å®ƒè¢«è®¾è®¡ä¸ºç®€å•æ˜“ç”¨ï¼ŒåŒæ—¶å…·æœ‰å¼ºå¤§çš„åŠŸèƒ½å’Œçµæ´»çš„å®šåˆ¶é€‰é¡¹
ä»¥ä¸‹æ˜¯ Jest çš„ä¸€äº›ä¸»è¦ç‰¹ç‚¹

- ç®€å•æ˜“ç”¨
   - Jest çš„ API è®¾è®¡ç®€æ´æ˜äº†ï¼Œå®¹æ˜“ä¸Šæ‰‹ï¼Œé€‚åˆç¼–å†™å„ç§è§„æ¨¡çš„æµ‹è¯•
- è‡ªåŠ¨ mocking
   - Jest è‡ªåŠ¨ä¸º JavaScript æ¨¡å—åˆ›å»º mockï¼Œç®€åŒ–äº†å¯¹æ¨¡å—ä¾èµ–çš„æµ‹è¯•ã€‚
- å¿«é€Ÿå¹¶è¡Œæ‰§è¡Œ
   - Jest å¯ä»¥å¹¶è¡Œæ‰§è¡Œæµ‹è¯•ï¼Œå› æ­¤åœ¨å¤§å‹é¡¹ç›®ä¸­å¯ä»¥æé«˜æµ‹è¯•æ‰§è¡Œé€Ÿåº¦ã€‚
- æ–­è¨€ä¸°å¯Œ
   - Jest æä¾›ä¸°å¯Œçš„æ–­è¨€å‡½æ•°ï¼ŒåŒ…æ‹¬åŒ¹é…å™¨ï¼ˆMatchersï¼‰å’ŒæœŸæœ›ï¼ˆExpectï¼‰è¯­æ³•ï¼Œå¯ä»¥æ–¹ä¾¿åœ°ç¼–å†™æ¸…æ™°çš„æµ‹è¯•æ–­è¨€
- å¿«ç…§æµ‹è¯•
   - Jest æ”¯æŒå¿«ç…§æµ‹è¯•ï¼Œç”¨äºæ£€æŸ¥ UI ç»„ä»¶çš„æ¸²æŸ“è¾“å‡ºæ˜¯å¦ç¬¦åˆé¢„æœŸã€‚
- Mock å‡½æ•°
   - Jest æä¾›äº†ä¸°å¯Œçš„ mock å‡½æ•°åŠŸèƒ½ï¼Œå¯ä»¥è½»æ¾æ¨¡æ‹Ÿå„ç§æƒ…å†µä¸‹çš„å‡½æ•°è¡Œä¸ºã€‚
- é›†æˆè¦†ç›–ç‡æŠ¥å‘Š
   - Jest æä¾›äº†é›†æˆçš„ä»£ç è¦†ç›–ç‡æŠ¥å‘ŠåŠŸèƒ½ï¼Œå¯ä»¥å¸®åŠ©å¼€å‘è€…è¯„ä¼°æµ‹è¯•çš„è¦†ç›–èŒƒå›´ã€‚
- å¿«é€Ÿå¯åŠ¨
   - Jest å¯ä»¥é›¶é…ç½®è¿è¡Œï¼Œä¹Ÿæ”¯æŒé€šè¿‡é…ç½®æ–‡ä»¶è¿›è¡Œè¿›ä¸€æ­¥å®šåˆ¶

1. å®‰è£…ä¾èµ–

```typescript
 pnpm add jest ts-jest @types/jest -D
```

2. package.json æ·»åŠ è„šæœ¬å‘½ä»¤

```json
  "scripts": {
    "test": "jest"
  },
```

3. åˆ›å»º jest.config.js æ–‡ä»¶

```javascript
export default {
  preset: 'ts-jest',
  transform: {
    '^.+\\.tsx?$': 'ts-jest',
  },
  testRegex: '(/tests/.*|(\\.|/))\\.(test|spec)\\.tsx?$',
  moduleFileExtensions: ['ts', 'tsx', 'js', 'jsx', 'json', 'node'],
};
```

4. åŸºäºè§„åˆ™ï¼Œåœ¨ packages ä¸‹åˆ›å»ºä¸€ä¸ª tests ç›®å½•ï¼Œåˆ›å»ºä¸€ä¸ª addNumbers.test.ts æ–‡ä»¶

```typescript
function addNumbers(a: number, b: number): number {
  return a + b;
}

describe('addNumbers å‡½æ•°', () => {
  it('ä¸¤ä¸ªæ­£æ•°ç›¸åŠ ', () => {
    expect(addNumbers(3, 5)).toBe(8);
  });

  it('ä¸€ä¸ªæ­£æ•°å’Œä¸€ä¸ªè´Ÿæ•°ç›¸åŠ ', () => {
    expect(addNumbers(-3, 5)).toBe(2);
  });

  it('ä¸¤ä¸ªè´Ÿæ•°ç›¸åŠ ', () => {
    expect(addNumbers(-3, -5)).toBe(-8);
  });

  it('ä¸¤ä¸ªå°æ•°ç›¸åŠ ', () => {
    expect(addNumbers(1.5, 2.5)).toBeCloseTo(4);
  });

  it('è¾¹ç•Œæ¡ä»¶ï¼Œ0ç›¸åŠ ', () => {
    expect(addNumbers(0, 0)).toBe(0);
  });
});
```

5. package.json æ·»åŠ  type ç±»å‹

```json
{
  "type": "module"
}
```

6. è¿è¡Œå‘½ä»¤è°ƒè¯•

```bash
pnpm test
```

7. æ·»åŠ  getQuery çš„æµ‹è¯•ç”¨ä¾‹

```javascript
import { getQuery } from '../core/index';

describe('getQuery', () => {
  it('should return an empty object if there is no query string', () => {
    const url = 'https://example.com';
    expect(getQuery(url)).toEqual({});
  });

  it('should return an object containing query params', () => {
    const url = 'https://example.com/?name=John&age=30';
    expect(getQuery(url)).toEqual({ name: 'John', age: '30' });
  });

  it('should handle encoded query params', () => {
    const url = 'https://example.com/?name=John%20Doe&age=30';
    expect(getQuery(url)).toEqual({ name: 'John Doe', age: '30' });
  });
});
```

### æ·»åŠ  playground

è°ƒè¯•æœ¬åœ°æ–¹æ³•æ—¶ï¼Œæœ‰ä¸€ä¸ªæ¼”ç»ƒåœºæ˜¯éå¸¸æ–¹ä¾¿çš„ã€‚åœ¨å¼€å‘å®Œæˆåï¼Œä¸€ä¸ªæˆç†Ÿçš„å¼€æºé¡¹ç›®é€šå¸¸éœ€è¦åœ¨æœ¬åœ°æµ‹è¯•å®Œæ¯•åå†è¿›è¡Œå‘å¸ƒã€‚å› æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥åŸºäº Vite åˆ›å»ºä¸€ä¸ªé¡¹ç›®ï¼Œå¹¶åœ¨é¡¹ç›®çš„æ ¹ç›®å½•å¤„åˆ›å»ºä¸€ä¸ªæ¼”ç»ƒåœºæ¥è¿›è¡Œè°ƒè¯•

1. åˆ›å»ºé¡¹ç›®ç›®å½•

```bash
pnpm create vite playground --template vue
```

2. å¯åŠ¨é¡¹ç›®

```bash
pnpm dev
```

3. é¡¹ç›®è°ƒè¯•

åœ¨ App.vue ä¸­ï¼Œæ·»åŠ ä»£ç è¿›è¡Œè°ƒè¯•

```vue
<script setup>
import HelloWorld from './components/HelloWorld.vue'
import { getQuery } from '../../packages/core/index'
import { onMounted } from 'vue'

onMounted(() => {
  console.log(getQuery())
})
</script>
```

## 4.æ„å»ºå·¥å…·

åœ¨é€‰æ‹©ä½¿ç”¨ Rollup è¿˜æ˜¯ Vite æ—¶ï¼Œéœ€è¦æ ¹æ®å…·ä½“çš„é¡¹ç›®éœ€æ±‚å’Œç‰¹ç‚¹æ¥å†³å®šã€‚ä»¥ä¸‹æ˜¯ä¸¤ç§æ„å»ºå·¥å…·çš„ç‰¹ç‚¹ï¼š

- Rollup
  - Rollup æ˜¯ä¸€ç§ JavaScript æ¨¡å—æ‰“åŒ…å™¨ï¼Œç‰¹åˆ«é€‚ç”¨äºæ„å»ºå°å‹ã€é«˜æ€§èƒ½çš„åº“å’Œå·¥å…·ã€‚å®ƒå…·æœ‰å‡ºè‰²çš„ Tree Shaking åŠŸèƒ½ï¼Œå¯ä»¥æ¶ˆé™¤æœªä½¿ç”¨çš„ä»£ç ï¼Œä»è€Œç”Ÿæˆæ›´å°ã€æ›´é«˜æ•ˆçš„è¾“å‡ºæ–‡ä»¶ã€‚å¯¹äºçº¯ JavaScript é¡¹ç›®ï¼ŒRollup æä¾›äº†æ›´å¥½çš„æ€§èƒ½å’Œä¼˜åŒ–é€‰é¡¹ã€‚å¦‚æœé¡¹ç›®çš„ä½“ç§¯è¾ƒå°æˆ–è€…æ€§èƒ½è¦æ±‚è¾ƒé«˜ï¼Œé‚£ä¹ˆ Rollup å¯èƒ½æ˜¯æ›´å¥½çš„é€‰æ‹©
- Vite
  - Vite æ˜¯ä¸€ç§åŸºäº ES æ¨¡å—çš„æ„å»ºå·¥å…·ï¼Œä¸“é—¨é’ˆå¯¹ Vue å¼€å‘è€Œè®¾è®¡ã€‚å®ƒé‡‡ç”¨äº†ç°ä»£çš„å¼€å‘æ–¹å¼ï¼Œåˆ©ç”¨åŸç”Ÿ ES æ¨¡å—åœ¨å¼€å‘ç¯å¢ƒä¸­å®ç°å¿«é€Ÿçš„çƒ­é‡è½½ï¼Œå¹¶ä¸”æ— éœ€æ‰“åŒ…å³å¯å®æ—¶ç¼–è¯‘å’ŒåŠ è½½æ¨¡å—ã€‚è¿™ä½¿å¾—åœ¨å¼€å‘è¿‡ç¨‹ä¸­çš„åé¦ˆé€Ÿåº¦æ›´å¿«ï¼Œèƒ½å¤Ÿæé«˜å¼€å‘æ•ˆç‡ã€‚æ­¤å¤–ï¼ŒVite è¿˜æ”¯æŒå¿«é€Ÿè§£æå’ŒåŠ è½½ Vue å•æ–‡ä»¶ç»„ä»¶ï¼ˆSFCï¼‰ï¼Œè¿›ä¸€æ­¥åŠ é€Ÿäº†å¼€å‘è¿‡ç¨‹ã€‚å¦‚æœé¡¹ç›®ä½¿ç”¨çš„æ˜¯ Vue æ¡†æ¶ï¼Œå¹¶ä¸”å¸Œæœ›èƒ½å¤Ÿå……åˆ†åˆ©ç”¨ Vue ç”Ÿæ€ç³»ç»Ÿçš„ç‰¹æ€§ï¼Œé‚£ä¹ˆ Vite å¯èƒ½æ›´é€‚åˆä½ 

å®é™…æƒ…å†µä¸‹ï¼Œå“ªç§æ„å»ºå·¥å…·æ›´é€‚åˆä½ çš„é¡¹ç›®å–å†³äºå¤šç§å› ç´ ï¼Œä¾‹å¦‚é¡¹ç›®çš„è§„æ¨¡ã€æ‰€éœ€çš„æ€§èƒ½å’Œæ‰“åŒ…ä½“ç§¯ç­‰ç­‰ã€‚éœ€è¦æ ¹æ®å…·ä½“æƒ…å†µç»¼åˆè€ƒè™‘ï¼Œé€‰æ‹©æœ€é€‚åˆçš„æ„å»ºå·¥å…·

### é…ç½® rollup

1. å®‰è£…ä¾èµ–

```bash
pnpm add @babel/core @babel/preset-env @rollup/plugin-babel @rollup/plugin-commonjs @rollup/plugin-node-resolve @rollup/plugin-terser @rollup/plugin-typescript rollup tslib typescript -D
```

2. åˆ›å»º rollup.config.js

```javascript
import NodeResolve from '@rollup/plugin-node-resolve'
import commonjs from '@rollup/plugin-commonjs'
import babel from '@rollup/plugin-babel'
import terser from '@rollup/plugin-terser'
import typescript from '@rollup/plugin-typescript'

const name = 'tool'

export default {
  input: './packages/core/index.ts',
  output: [
    {
      name,
      file: `dist/index.js`,
      format: 'esm',
      // plugins: [terser()]
    }
  ],
  plugins: [
    NodeResolve(),
    commonjs(),
    typescript({
      outDir: 'dist/'
    }),
    babel({
      extensions: ['js', 'ts'],
      babelHelpers: 'bundled',
      exclude: 'node_modules/**'
    })
  ]
}
```

3. æ·»åŠ ç¼–è¯‘ä¿¡æ¯

```bash
{
  "main": "dist/index.js",
  "types": "dist/index.d.ts",
  "scripts": {
    "build": "rollup --config ./rollup.config.js"
  },
}
```

4. è¿è¡Œå‘½ä»¤

```bash
pnpm build
```

### é…ç½®æ–‡æ¡£ç«™ç‚¹

1. ä¿®æ”¹ markdown-examples.md å†…å®¹

```markdown
---
title: Tools
---

# Tools
## getQuery

ğŸ¯è·å– URL ä¸­çš„æŸ¥è¯¢å‚æ•°

```typescript

/**
 * @func getQuery
 * @desc è·å– URL ä¸­çš„æŸ¥è¯¢å‚æ•°
 * @param url æŒ‡å®š URL è·¯å¾„ï¼Œé»˜è®¤ä¸ºå½“å‰é¡µé¢çš„ URL åœ°å€
 * @returns è¿”å›åŒ…å« URL ä¸­æŸ¥è¯¢å‚æ•°çš„é”®å€¼å¯¹çš„å¯¹è±¡
 * @example
 * const url = 'https://example.com/?name=John&age=30';
 * const query = getQuery(url);
 * console.log(query);
 * // è¾“å‡ºï¼š{ name: "John", age: "30" }
 */

```
```

2. è§£æ config.mts

```markdown
import { defineConfig } from 'vitepress'

// https://vitepress.dev/reference/site-config
export default defineConfig({
  title: "My Awesome Project",
  description: "A VitePress Site",
  themeConfig: {
    // å¯¼èˆªé“¾æ¥
    nav: [
      { text: 'Home', link: '/' }, // é“¾æ¥åˆ°é¦–é¡µ
      { text: 'Examples', link: '/markdown-examples' } // é“¾æ¥åˆ°ç¤ºä¾‹é¡µé¢
    ],

    // ä¾§è¾¹æ é“¾æ¥
    sidebar: [
      {
        text: 'Examples',
        items: [
          { text: 'Markdown Examples', link: '/markdown-examples' }, // é“¾æ¥åˆ° Markdown ç¤ºä¾‹é¡µé¢
          { text: 'Runtime API Examples', link: '/api-examples' } // é“¾æ¥åˆ°è¿è¡Œæ—¶ API ç¤ºä¾‹é¡µé¢
        ]
      }
    ],

    // ç¤¾äº¤é“¾æ¥
    socialLinks: [
      { icon: 'github', link: 'https://github.com/vuejs/vitepress' } // GitHub é“¾æ¥
    ]
  }
})

```

## 5.å‘å¸ƒä¸éƒ¨ç½²

1. å‘å¸ƒå·¥å…·åŒ…

```markdown
yarn publish
```

2. vitepress éƒ¨ç½²

```bash
pnpm docs:build
```

3. æŸ¥çœ‹ distï¼Œdist ç›®å½•ä¸‹

```bash
http-server
```
